{"id":"../node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/createSpeechSynthesisPonyfill.js","dependencies":[{"name":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/createSpeechSynthesisPonyfill.js.map","includedInParent":true,"mtime":1733074798686},{"name":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/package.json","includedInParent":true,"mtime":1733076065657},{"name":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/package.json","includedInParent":true,"mtime":1733074798686},{"name":"@babel/runtime/helpers/interopRequireDefault","loc":{"line":3,"column":37,"index":52},"parent":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/createSpeechSynthesisPonyfill.js","resolved":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/node_modules/@babel/runtime/helpers/interopRequireDefault.js"},{"name":"@babel/runtime/regenerator","loc":{"line":10,"column":50,"index":244},"parent":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/createSpeechSynthesisPonyfill.js","resolved":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/node_modules/@babel/runtime/regenerator/index.js"},{"name":"@babel/runtime/helpers/asyncToGenerator","loc":{"line":12,"column":56,"index":333},"parent":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/createSpeechSynthesisPonyfill.js","resolved":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/node_modules/@babel/runtime/helpers/asyncToGenerator.js"},{"name":"@babel/runtime/helpers/classCallCheck","loc":{"line":14,"column":54,"index":433},"parent":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/createSpeechSynthesisPonyfill.js","resolved":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/node_modules/@babel/runtime/helpers/classCallCheck.js"},{"name":"@babel/runtime/helpers/createClass","loc":{"line":16,"column":51,"index":528},"parent":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/createSpeechSynthesisPonyfill.js","resolved":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/node_modules/@babel/runtime/helpers/createClass.js"},{"name":"@babel/runtime/helpers/inherits","loc":{"line":18,"column":48,"index":617},"parent":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/createSpeechSynthesisPonyfill.js","resolved":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/node_modules/@babel/runtime/helpers/inherits.js"},{"name":"@babel/runtime/helpers/possibleConstructorReturn","loc":{"line":20,"column":65,"index":720},"parent":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/createSpeechSynthesisPonyfill.js","resolved":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"},{"name":"@babel/runtime/helpers/getPrototypeOf","loc":{"line":22,"column":54,"index":829},"parent":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/createSpeechSynthesisPonyfill.js","resolved":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/node_modules/@babel/runtime/helpers/getPrototypeOf.js"},{"name":"event-target-shim/es5","loc":{"line":24,"column":18,"index":891},"parent":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/createSpeechSynthesisPonyfill.js","resolved":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/event-target-shim/es5.js"},{"name":"p-defer-es5","loc":{"line":26,"column":47,"index":965},"parent":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/createSpeechSynthesisPonyfill.js","resolved":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/p-defer-es5/lib/esm/index.mjs"},{"name":"on-error-resume-next","loc":{"line":28,"column":56,"index":1039},"parent":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/createSpeechSynthesisPonyfill.js","resolved":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/on-error-resume-next/lib/index.js"},{"name":"./AudioContextQueue","loc":{"line":30,"column":56,"index":1122},"parent":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/createSpeechSynthesisPonyfill.js","resolved":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/AudioContextQueue.js"},{"name":"./fetchCustomVoices","loc":{"line":32,"column":56,"index":1204},"parent":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/createSpeechSynthesisPonyfill.js","resolved":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/fetchCustomVoices.js"},{"name":"./fetchVoices","loc":{"line":34,"column":50,"index":1280},"parent":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/createSpeechSynthesisPonyfill.js","resolved":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/fetchVoices.js"},{"name":"../patchOptions","loc":{"line":36,"column":52,"index":1352},"parent":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/createSpeechSynthesisPonyfill.js","resolved":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/patchOptions.js"},{"name":"./SpeechSynthesisEvent","loc":{"line":38,"column":59,"index":1433},"parent":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/createSpeechSynthesisPonyfill.js","resolved":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/SpeechSynthesisEvent.js"},{"name":"./SpeechSynthesisUtterance","loc":{"line":40,"column":63,"index":1525},"parent":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/createSpeechSynthesisPonyfill.js","resolved":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/SpeechSynthesisUtterance.js"}],"generated":{"js":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _es = require(\"event-target-shim/es5\");\n\nvar _pDeferEs = _interopRequireDefault(require(\"p-defer-es5\"));\n\nvar _onErrorResumeNext = _interopRequireDefault(require(\"on-error-resume-next\"));\n\nvar _AudioContextQueue = _interopRequireDefault(require(\"./AudioContextQueue\"));\n\nvar _fetchCustomVoices = _interopRequireDefault(require(\"./fetchCustomVoices\"));\n\nvar _fetchVoices = _interopRequireDefault(require(\"./fetchVoices\"));\n\nvar _patchOptions2 = _interopRequireDefault(require(\"../patchOptions\"));\n\nvar _SpeechSynthesisEvent = _interopRequireDefault(require(\"./SpeechSynthesisEvent\"));\n\nvar _SpeechSynthesisUtterance = _interopRequireDefault(require(\"./SpeechSynthesisUtterance\"));\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n// Supported output format can be found at https://docs.microsoft.com/en-us/azure/cognitive-services/speech-service/rest-text-to-speech#audio-outputs\nvar DEFAULT_OUTPUT_FORMAT = 'audio-24khz-160kbitrate-mono-mp3';\nvar EMPTY_ARRAY = [];\n\nvar _default = function _default(options) {\n  var _patchOptions = (0, _patchOptions2.default)(options),\n      audioContext = _patchOptions.audioContext,\n      fetchCredentials = _patchOptions.fetchCredentials,\n      _patchOptions$ponyfil = _patchOptions.ponyfill,\n      ponyfill = _patchOptions$ponyfil === void 0 ? {\n    AudioContext: window.AudioContext || window.webkitAudioContext\n  } : _patchOptions$ponyfil,\n      speechSynthesisDeploymentId = _patchOptions.speechSynthesisDeploymentId,\n      _patchOptions$speechS = _patchOptions.speechSynthesisOutputFormat,\n      speechSynthesisOutputFormat = _patchOptions$speechS === void 0 ? DEFAULT_OUTPUT_FORMAT : _patchOptions$speechS;\n\n  if (!audioContext && !ponyfill.AudioContext) {\n    console.warn('web-speech-cognitive-services: This browser does not support Web Audio and it will not work with Cognitive Services Speech Services.');\n    return {};\n  }\n\n  var SpeechSynthesis = /*#__PURE__*/function (_EventTarget) {\n    (0, _inherits2.default)(SpeechSynthesis, _EventTarget);\n\n    var _super = _createSuper(SpeechSynthesis);\n\n    function SpeechSynthesis() {\n      var _this;\n\n      (0, _classCallCheck2.default)(this, SpeechSynthesis);\n      _this = _super.call(this);\n      _this.queue = new _AudioContextQueue.default({\n        audioContext: audioContext,\n        ponyfill: ponyfill\n      });\n\n      _this.updateVoices();\n\n      return _this;\n    }\n\n    (0, _createClass2.default)(SpeechSynthesis, [{\n      key: \"cancel\",\n      value: function cancel() {\n        this.queue.stop();\n      }\n    }, {\n      key: \"getVoices\",\n      value: function getVoices() {\n        return EMPTY_ARRAY;\n      }\n    }, {\n      key: \"onvoiceschanged\",\n      get: function get() {\n        return (0, _es.getEventAttributeValue)(this, 'voiceschanged');\n      },\n      set: function set(value) {\n        (0, _es.setEventAttributeValue)(this, 'voiceschanged', value);\n      }\n    }, {\n      key: \"pause\",\n      value: function pause() {\n        this.queue.pause();\n      }\n    }, {\n      key: \"resume\",\n      value: function resume() {\n        this.queue.resume();\n      }\n    }, {\n      key: \"speak\",\n      value: function speak(utterance) {\n        if (!(utterance instanceof _SpeechSynthesisUtterance.default)) {\n          throw new Error('invalid utterance');\n        }\n\n        var _createDeferred = (0, _pDeferEs.default)(),\n            reject = _createDeferred.reject,\n            resolve = _createDeferred.resolve,\n            promise = _createDeferred.promise;\n\n        var handleError = function handleError(_ref) {\n          var errorCode = _ref.error,\n              message = _ref.message;\n          var error = new Error(errorCode);\n          error.stack = message;\n          reject(error);\n        };\n\n        utterance.addEventListener('end', resolve);\n        utterance.addEventListener('error', handleError);\n        utterance.preload({\n          deploymentId: speechSynthesisDeploymentId,\n          fetchCredentials: fetchCredentials,\n          outputFormat: speechSynthesisOutputFormat\n        });\n        this.queue.push(utterance);\n        return promise.finally(function () {\n          utterance.removeEventListener('end', resolve);\n          utterance.removeEventListener('error', handleError);\n        });\n      }\n    }, {\n      key: \"speaking\",\n      get: function get() {\n        return this.queue.speaking;\n      }\n    }, {\n      key: \"updateVoices\",\n      value: function () {\n        var _updateVoices = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3() {\n          var _this2 = this;\n\n          var _yield$fetchCredentia, customVoiceHostname, region, speechSynthesisHostname, subscriptionKey;\n\n          return _regenerator.default.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  _context3.next = 2;\n                  return fetchCredentials();\n\n                case 2:\n                  _yield$fetchCredentia = _context3.sent;\n                  customVoiceHostname = _yield$fetchCredentia.customVoiceHostname;\n                  region = _yield$fetchCredentia.region;\n                  speechSynthesisHostname = _yield$fetchCredentia.speechSynthesisHostname;\n                  subscriptionKey = _yield$fetchCredentia.subscriptionKey;\n\n                  if (!speechSynthesisDeploymentId) {\n                    _context3.next = 14;\n                    break;\n                  }\n\n                  if (!subscriptionKey) {\n                    _context3.next = 12;\n                    break;\n                  }\n\n                  console.warn('web-speech-cognitive-services: Listing of custom voice models are only available when using subscription key.');\n                  _context3.next = 12;\n                  return (0, _onErrorResumeNext.default)( /*#__PURE__*/(0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {\n                    var voices;\n                    return _regenerator.default.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            _context.next = 2;\n                            return (0, _fetchCustomVoices.default)({\n                              customVoiceHostname: customVoiceHostname,\n                              deploymentId: speechSynthesisDeploymentId,\n                              region: region,\n                              speechSynthesisHostname: speechSynthesisHostname,\n                              subscriptionKey: subscriptionKey\n                            });\n\n                          case 2:\n                            voices = _context.sent;\n\n                            _this2.getVoices = function () {\n                              return voices;\n                            };\n\n                          case 4:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee);\n                  })));\n\n                case 12:\n                  _context3.next = 16;\n                  break;\n\n                case 14:\n                  _context3.next = 16;\n                  return (0, _onErrorResumeNext.default)( /*#__PURE__*/(0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n                    var voices;\n                    return _regenerator.default.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            _context2.t0 = _fetchVoices.default;\n                            _context2.next = 3;\n                            return fetchCredentials();\n\n                          case 3:\n                            _context2.t1 = _context2.sent;\n                            _context2.next = 6;\n                            return (0, _context2.t0)(_context2.t1);\n\n                          case 6:\n                            voices = _context2.sent;\n\n                            _this2.getVoices = function () {\n                              return voices;\n                            };\n\n                          case 8:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2);\n                  })));\n\n                case 16:\n                  this.dispatchEvent(new _SpeechSynthesisEvent.default('voiceschanged'));\n\n                case 17:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3, this);\n        }));\n\n        function updateVoices() {\n          return _updateVoices.apply(this, arguments);\n        }\n\n        return updateVoices;\n      }()\n    }]);\n    return SpeechSynthesis;\n  }(_es.EventTarget);\n\n  return {\n    speechSynthesis: new SpeechSynthesis(),\n    SpeechSynthesisEvent: _SpeechSynthesisEvent.default,\n    SpeechSynthesisUtterance: _SpeechSynthesisUtterance.default\n  };\n};\n\nexports.default = _default;\n"},"sourceMaps":{"js":{"version":3,"file":"createSpeechSynthesisPonyfill.js","names":["DEFAULT_OUTPUT_FORMAT","EMPTY_ARRAY","options","patchOptions","audioContext","fetchCredentials","ponyfill","AudioContext","window","webkitAudioContext","speechSynthesisDeploymentId","speechSynthesisOutputFormat","console","warn","SpeechSynthesis","queue","AudioContextQueue","updateVoices","stop","getEventAttributeValue","value","setEventAttributeValue","pause","resume","utterance","SpeechSynthesisUtterance","Error","createDeferred","reject","resolve","promise","handleError","errorCode","error","message","stack","addEventListener","preload","deploymentId","outputFormat","push","finally","removeEventListener","speaking","customVoiceHostname","region","speechSynthesisHostname","subscriptionKey","onErrorResumeNext","fetchCustomVoices","voices","getVoices","fetchVoices","dispatchEvent","SpeechSynthesisEvent","EventTarget","speechSynthesis"],"sources":["../../../src/SpeechServices/TextToSpeech/createSpeechSynthesisPonyfill.js"],"sourcesContent":["/* eslint class-methods-use-this: 0 */\n\nimport { EventTarget, getEventAttributeValue, setEventAttributeValue } from 'event-target-shim/es5';\nimport createDeferred from 'p-defer-es5';\nimport onErrorResumeNext from 'on-error-resume-next';\n\nimport AudioContextQueue from './AudioContextQueue';\nimport fetchCustomVoices from './fetchCustomVoices';\nimport fetchVoices from './fetchVoices';\nimport patchOptions from '../patchOptions';\nimport SpeechSynthesisEvent from './SpeechSynthesisEvent';\nimport SpeechSynthesisUtterance from './SpeechSynthesisUtterance';\n\n// Supported output format can be found at https://docs.microsoft.com/en-us/azure/cognitive-services/speech-service/rest-text-to-speech#audio-outputs\nconst DEFAULT_OUTPUT_FORMAT = 'audio-24khz-160kbitrate-mono-mp3';\nconst EMPTY_ARRAY = [];\n\nexport default options => {\n  const {\n    audioContext,\n    fetchCredentials,\n    ponyfill = {\n      AudioContext: window.AudioContext || window.webkitAudioContext\n    },\n    speechSynthesisDeploymentId,\n    speechSynthesisOutputFormat = DEFAULT_OUTPUT_FORMAT\n  } = patchOptions(options);\n\n  if (!audioContext && !ponyfill.AudioContext) {\n    console.warn(\n      'web-speech-cognitive-services: This browser does not support Web Audio and it will not work with Cognitive Services Speech Services.'\n    );\n\n    return {};\n  }\n\n  class SpeechSynthesis extends EventTarget {\n    constructor() {\n      super();\n\n      this.queue = new AudioContextQueue({ audioContext, ponyfill });\n\n      this.updateVoices();\n    }\n\n    cancel() {\n      this.queue.stop();\n    }\n\n    getVoices() {\n      return EMPTY_ARRAY;\n    }\n\n    get onvoiceschanged() {\n      return getEventAttributeValue(this, 'voiceschanged');\n    }\n\n    set onvoiceschanged(value) {\n      setEventAttributeValue(this, 'voiceschanged', value);\n    }\n\n    pause() {\n      this.queue.pause();\n    }\n\n    resume() {\n      this.queue.resume();\n    }\n\n    speak(utterance) {\n      if (!(utterance instanceof SpeechSynthesisUtterance)) {\n        throw new Error('invalid utterance');\n      }\n\n      const { reject, resolve, promise } = createDeferred();\n      const handleError = ({ error: errorCode, message }) => {\n        const error = new Error(errorCode);\n\n        error.stack = message;\n\n        reject(error);\n      };\n\n      utterance.addEventListener('end', resolve);\n      utterance.addEventListener('error', handleError);\n\n      utterance.preload({\n        deploymentId: speechSynthesisDeploymentId,\n        fetchCredentials,\n        outputFormat: speechSynthesisOutputFormat\n      });\n\n      this.queue.push(utterance);\n\n      return promise.finally(() => {\n        utterance.removeEventListener('end', resolve);\n        utterance.removeEventListener('error', handleError);\n      });\n    }\n\n    get speaking() {\n      return this.queue.speaking;\n    }\n\n    async updateVoices() {\n      const { customVoiceHostname, region, speechSynthesisHostname, subscriptionKey } = await fetchCredentials();\n\n      if (speechSynthesisDeploymentId) {\n        if (subscriptionKey) {\n          console.warn(\n            'web-speech-cognitive-services: Listing of custom voice models are only available when using subscription key.'\n          );\n\n          await onErrorResumeNext(async () => {\n            const voices = await fetchCustomVoices({\n              customVoiceHostname,\n              deploymentId: speechSynthesisDeploymentId,\n              region,\n              speechSynthesisHostname,\n              subscriptionKey\n            });\n\n            this.getVoices = () => voices;\n          });\n        }\n      } else {\n        // If fetch voice list failed, we will not emit \"voiceschanged\" event.\n        // In the spec, there is no \"error\" event.\n\n        await onErrorResumeNext(async () => {\n          const voices = await fetchVoices(await fetchCredentials());\n\n          this.getVoices = () => voices;\n        });\n      }\n\n      this.dispatchEvent(new SpeechSynthesisEvent('voiceschanged'));\n    }\n  }\n\n  return {\n    speechSynthesis: new SpeechSynthesis(),\n    SpeechSynthesisEvent,\n    SpeechSynthesisUtterance\n  };\n};\n"],"mappings":"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"}},"error":null,"hash":"42dcf47cd83ae7f8258a5bf1be679f85","cacheData":{"env":{}}}