{"id":"../node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/fetchVoices.js","dependencies":[{"name":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/fetchVoices.js.map","includedInParent":true,"mtime":1733074798686},{"name":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/package.json","includedInParent":true,"mtime":1733076065657},{"name":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/package.json","includedInParent":true,"mtime":1733074798686},{"name":"@babel/runtime/helpers/interopRequireDefault","loc":{"line":3,"column":37,"index":52},"parent":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/fetchVoices.js","resolved":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/node_modules/@babel/runtime/helpers/interopRequireDefault.js"},{"name":"@babel/runtime/regenerator","loc":{"line":10,"column":50,"index":249},"parent":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/fetchVoices.js","resolved":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/node_modules/@babel/runtime/regenerator/index.js"},{"name":"@babel/runtime/helpers/defineProperty","loc":{"line":12,"column":54,"index":336},"parent":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/fetchVoices.js","resolved":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/node_modules/@babel/runtime/helpers/defineProperty.js"},{"name":"@babel/runtime/helpers/asyncToGenerator","loc":{"line":14,"column":56,"index":436},"parent":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/fetchVoices.js","resolved":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/node_modules/@babel/runtime/helpers/asyncToGenerator.js"},{"name":"./SpeechSynthesisVoice","loc":{"line":16,"column":59,"index":541},"parent":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/fetchVoices.js","resolved":"/Users/amblardv5/Nextcloud/2024/dialogue-systems-1-2024/node_modules/web-speech-cognitive-services/lib/SpeechServices/TextToSpeech/SpeechSynthesisVoice.js"}],"generated":{"js":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = fetchVoices;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _SpeechSynthesisVoice = _interopRequireDefault(require(\"./SpeechSynthesisVoice\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction fetchVoices(_x) {\n  return _fetchVoices.apply(this, arguments);\n}\n\nfunction _fetchVoices() {\n  _fetchVoices = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(_ref) {\n    var authorizationToken, region, speechSynthesisHostname, subscriptionKey, hostname, res, voices;\n    return _regenerator.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            authorizationToken = _ref.authorizationToken, region = _ref.region, speechSynthesisHostname = _ref.speechSynthesisHostname, subscriptionKey = _ref.subscriptionKey;\n            // Although encodeURI on a hostname doesn't work as expected for hostname, at least, it will fail peacefully.\n            hostname = speechSynthesisHostname || \"\".concat(encodeURI(region), \".tts.speech.microsoft.com\");\n            _context.next = 4;\n            return fetch(\"https://\".concat(hostname, \"/cognitiveservices/voices/list\"), {\n              headers: _objectSpread({\n                'content-type': 'application/json'\n              }, authorizationToken ? {\n                authorization: \"Bearer \".concat(authorizationToken)\n              } : {\n                'Ocp-Apim-Subscription-Key': subscriptionKey\n              })\n            });\n\n          case 4:\n            res = _context.sent;\n\n            if (res.ok) {\n              _context.next = 7;\n              break;\n            }\n\n            throw new Error('Failed to fetch voices');\n\n          case 7:\n            _context.next = 9;\n            return res.json();\n\n          case 9:\n            voices = _context.sent;\n            return _context.abrupt(\"return\", voices.map(function (_ref2) {\n              var gender = _ref2.Gender,\n                  lang = _ref2.Locale,\n                  voiceURI = _ref2.Name;\n              return new _SpeechSynthesisVoice.default({\n                gender: gender,\n                lang: lang,\n                voiceURI: voiceURI\n              });\n            }).sort(function (_ref3, _ref4) {\n              var x = _ref3.name;\n              var y = _ref4.name;\n              return x > y ? 1 : x < y ? -1 : 0;\n            }));\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _fetchVoices.apply(this, arguments);\n}\n"},"sourceMaps":{"js":{"version":3,"file":"fetchVoices.js","names":["fetchVoices","authorizationToken","region","speechSynthesisHostname","subscriptionKey","hostname","encodeURI","fetch","headers","authorization","res","ok","Error","json","voices","map","gender","Gender","lang","Locale","voiceURI","Name","SpeechSynthesisVoice","sort","x","name","y"],"sources":["../../../src/SpeechServices/TextToSpeech/fetchVoices.js"],"sourcesContent":["/* eslint no-magic-numbers: [\"error\", { \"ignore\": [0, 1, -1] }] */\n\nimport SpeechSynthesisVoice from './SpeechSynthesisVoice';\n\nexport default async function fetchVoices({ authorizationToken, region, speechSynthesisHostname, subscriptionKey }) {\n  // Although encodeURI on a hostname doesn't work as expected for hostname, at least, it will fail peacefully.\n  const hostname = speechSynthesisHostname || `${ encodeURI(region) }.tts.speech.microsoft.com`;\n  const res = await fetch(`https://${ hostname }/cognitiveservices/voices/list`, {\n    headers: {\n      'content-type': 'application/json',\n      ...(authorizationToken\n        ? {\n            authorization: `Bearer ${ authorizationToken }`\n          }\n        : {\n            'Ocp-Apim-Subscription-Key': subscriptionKey\n          })\n    }\n  });\n\n  if (!res.ok) {\n    throw new Error('Failed to fetch voices');\n  }\n\n  const voices = await res.json();\n\n  return voices\n    .map(({ Gender: gender, Locale: lang, Name: voiceURI }) => new SpeechSynthesisVoice({ gender, lang, voiceURI }))\n    .sort(({ name: x }, { name: y }) => (x > y ? 1 : x < y ? -1 : 0));\n}\n"],"mappings":";;;;;;;;;;;;;;;AAEA;;;;;;SAE8BA,W;;;;;yFAAf;IAAA;IAAA;MAAA;QAAA;UAAA;YAA6BC,kBAA7B,QAA6BA,kBAA7B,EAAiDC,MAAjD,QAAiDA,MAAjD,EAAyDC,uBAAzD,QAAyDA,uBAAzD,EAAkFC,eAAlF,QAAkFA,eAAlF;YACb;YACMC,QAFO,GAEIF,uBAAuB,cAAQG,SAAS,CAACJ,MAAD,CAAjB,8BAF3B;YAAA;YAAA,OAGKK,KAAK,mBAAaF,QAAb,qCAAwD;cAC7EG,OAAO;gBACL,gBAAgB;cADX,GAEDP,kBAAkB,GAClB;gBACEQ,aAAa,mBAAaR,kBAAb;cADf,CADkB,GAIlB;gBACE,6BAA6BG;cAD/B,CANC;YADsE,CAAxD,CAHV;;UAAA;YAGPM,GAHO;;YAAA,IAgBRA,GAAG,CAACC,EAhBI;cAAA;cAAA;YAAA;;YAAA,MAiBL,IAAIC,KAAJ,CAAU,wBAAV,CAjBK;;UAAA;YAAA;YAAA,OAoBQF,GAAG,CAACG,IAAJ,EApBR;;UAAA;YAoBPC,MApBO;YAAA,iCAsBNA,MAAM,CACVC,GADI,CACA;cAAA,IAAWC,MAAX,SAAGC,MAAH;cAAA,IAA2BC,IAA3B,SAAmBC,MAAnB;cAAA,IAAuCC,QAAvC,SAAiCC,IAAjC;cAAA,OAAsD,IAAIC,6BAAJ,CAAyB;gBAAEN,MAAM,EAANA,MAAF;gBAAUE,IAAI,EAAJA,IAAV;gBAAgBE,QAAQ,EAARA;cAAhB,CAAzB,CAAtD;YAAA,CADA,EAEJG,IAFI,CAEC;cAAA,IAASC,CAAT,SAAGC,IAAH;cAAA,IAAsBC,CAAtB,SAAgBD,IAAhB;cAAA,OAA+BD,CAAC,GAAGE,CAAJ,GAAQ,CAAR,GAAYF,CAAC,GAAGE,CAAJ,GAAQ,CAAC,CAAT,GAAa,CAAxD;YAAA,CAFD,CAtBM;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,C"}},"error":null,"hash":"6ddfe3a03ddeff210016c0998dc7a263","cacheData":{"env":{}}}